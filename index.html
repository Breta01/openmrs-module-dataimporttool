<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>OpenMRS Data Import Tool by Ch3ck</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>OpenMRS Data Import Tool</h1>
        <h2>A system to migrate from SQL-based databases into OpenMRS</h2>
        <a href="https://github.com/Ch3ck/openmrs-module-dataimporttool" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a id="the-openmrs-data-import-tool-guide" class="anchor" href="#the-openmrs-data-import-tool-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>The OpenMRS Data Import Tool Guide</h3>

<p>This project improves ease of data migration for production settings by improving upon an existing data migration tool to make it more user friendly. The Data Import Tool integrates  the eSaude Data Migration Tool (eSaudeDMT) it in order to migrate data from SQL-based data source into OpenMRS. This module provides a WUI to configure migration settings that are currently being performed using an XML file (config.xml), and a Start Migration(command) button to ignite the execution. </p>

<h2>
<a id="instructions" class="anchor" href="#instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instructions</h2>

<p>This document will describe how to use the Data Import Tool to migrate data from a dummy database into OpenMRS.</p>

<h3>
<a id="step-1-build-the-data-import-tool" class="anchor" href="#step-1-build-the-data-import-tool" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1. Build The Data Import Tool</h3>

<p>Clone the DMT repo and build it.</p>

<pre><code>  $ git clone https://github.com/Ch3ck/openmrs-module-dataimporttool.git
  $ cd openmrs-module-dataimporttool
  $ mvn clean install


  This command generates a omod file for the openmrs-module-data-importtool 
</code></pre>

<h3>
<a id="step-2-install-openmrs-1113" class="anchor" href="#step-2-install-openmrs-1113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2. Install OpenMRS 1.11.3</h3>

<p>Download the <a href="http://sourceforge.net/projects/openmrs/files/releases/OpenMRS_Platform_1.11.3/openmrs.war/download">OpenMRS WAR file</a> and deploy it to Tomcat.</p>

<h3>
<a id="step-3-prepare-dummy-database" class="anchor" href="#step-3-prepare-dummy-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3. Prepare Dummy Database</h3>

<p>Refer to the DMT-Guide on Github: <a href="https://github.com/esaude/dmt-guide">https://github.com/esaude/dmt-guide</a>
for test Database and instructions on data migration.</p>

<p>I.) Create a dummy database, populated with data.</p>

<p>Clone dmt-guide</p>

<pre><code>    $git clone https://github.com/esaude/dmt-guide
    cd dmt-guide
</code></pre>

<pre><code>  $ mysql -uroot -p
  mysql&gt; create database dummy;
  mysql&gt; use dummy;
  mysql&gt; \. resources/source_medical_dummy.sql
</code></pre>

<p>II.) Create a dummy OpenMRS database</p>

<pre><code>  $ mysql -uroot -p
  mysql&gt; create database openmrs2;
  mysql&gt; use openmrs2;
  mysql&gt; \. resources/openmrs-1.11.3-clean.sql
</code></pre>

<p>There is a required change that must be done in OpenMRS database in order to run the migration, in OpenMRS 11 the PATIENT.patient_id column is not AUTO_INCREMENT, this way JDBC will not return the generated key. 
Use the script(alter_patient_id.sql) to alter the patient_id, after the migration you can change it back to normal</p>

<pre><code>  mysql&gt; \. resources/alter_patient_id.sql
</code></pre>

<h3>
<a id="step-4-complete-the-mapping-spreadsheet" class="anchor" href="#step-4-complete-the-mapping-spreadsheet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4. Complete The Mapping Spreadsheet</h3>

<p>The mapping sheet we are using can be download from <a href="https://github.com/esaude/dmt-guide/blob/master/resources/dummy-data-mapping_version.xls">Mapping Sheet</a>.</p>

<p>I) Linux Users Only</p>

<p>1.) Install the MySQL/Mariadb java connector/driver<a href="https://code.mariadb.com/connectors/java/">MariaDB Connector</a>.
      Alternatively you can copy the mariadb connector.jar files to the appropriate /usr/lib/java*/jre/lib/ext/ directory</p>

<h3>
<a id="step-5-run-the-dit-from-openmrs" class="anchor" href="#step-5-run-the-dit-from-openmrs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 5. Run The DIT from OpenMRS</h3>

<p>1.) Upload the module from the OpenMRS Manage modules link</p>

<p>2.) Click on the Start Migration link under the Data Import Tool</p>

<p>3.) Verify the migration settings and click 'Start Migration'</p>

<h2>
<a id="resources" class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h2>

<p>1.) <a href="https://github.com/esaude/dmt-guide/blob/master/resources/dummy-data-mapping_version.xls">Matching File</a></p>

<p>2.) <a href="https://code.mariadb.com/connectors/java/">MariaDB Connector</a></p>

<p>3.) <a href="https://github.com/esaude/dmt-guide/tree/master/resources/config.xml">Sample Linux Config</a></p>

<p>The docs can be downloaded from <a href="https://wiki.openmrs.org/pages/viewpageattachments.action?pageId=80379983">the OpenMRS DMT wiki page</a>.
OpenMRS mailing list <a href="https://talk.openmrs.org">OpenMRS talk</a>.</p>

<p>If you have any further questions send an email to ch3ck [at] openmrs [dot] org </p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>1.)Nyah Check(Ch3ck)
2.) Valerio Joao(vjoao)
3.) Pascal Brandt(psbrandt) </p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Ch3ck/openmrs-module-dataimporttool/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Ch3ck/openmrs-module-dataimporttool/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Ch3ck/openmrs-module-dataimporttool"></a> is maintained by <a href="https://github.com/Ch3ck">Ch3ck</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
